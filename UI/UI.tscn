[gd_scene load_steps=27 format=2]

[ext_resource path="res://UI/UI.gd" type="Script" id=1]
[ext_resource path="res://Assets/Fonts/PausedFont.tres" type="DynamicFont" id=2]
[ext_resource path="res://Assets/Shader/Vignette.gdshader" type="Shader" id=3]
[ext_resource path="res://Assets/Sprites/treasure_diamond.png" type="Texture" id=4]
[ext_resource path="res://Assets/Sprites/gold.png" type="Texture" id=6]
[ext_resource path="res://Assets/Fonts/debug_font.tres" type="DynamicFont" id=7]
[ext_resource path="res://Assets/Sprites/gear.png" type="Texture" id=8]
[ext_resource path="res://Assets/Fonts/TreasureFont.tres" type="DynamicFont" id=9]
[ext_resource path="res://Assets/Sprites/energy_crystal.png" type="Texture" id=10]
[ext_resource path="res://Assets/Sprites/upgrade_icons/power_bar_icon.png" type="Texture" id=11]
[ext_resource path="res://Assets/Shader/energy_crystal_ui.gdshader" type="Shader" id=12]

[sub_resource type="ShaderMaterial" id=13]
shader = ExtResource( 3 )
shader_param/vignette_intensity = 0.5
shader_param/vignette_opacity = 0.465
shader_param/vignette_rgb = Color( 0.105882, 0.784314, 0.964706, 1 )

[sub_resource type="Shader" id=7]
code = "shader_type canvas_item;
render_mode blend_mix;

uniform sampler2D texture_resource;
uniform vec4 fill_color: hint_color;
uniform vec4 empty_color: hint_color;
uniform bool enabled;
uniform bool half_enabled;

void fragment(){
	vec4 color;
	vec4 tex = texture(texture_resource, UV);
	if(half_enabled) {
		color = float(UV.y >= 0.5) * tex * fill_color
			+ float(UV.y < 0.5) * tex * empty_color;
	}
	else if(enabled) {
		color = tex * fill_color;
	} else {
		color = vec4(1.0 - float(enabled)) * tex * empty_color;	
	}
	
	COLOR = color;
	
}"

[sub_resource type="ShaderMaterial" id=5]
shader = SubResource( 7 )
shader_param/fill_color = Color( 0.611681, 0.182877, 0.917969, 1 )
shader_param/empty_color = Color( 1, 1, 1, 0.266667 )
shader_param/enabled = false
shader_param/half_enabled = false
shader_param/texture_resource = ExtResource( 10 )

[sub_resource type="StyleBoxFlat" id=10]
bg_color = Color( 0, 0, 0, 0.607843 )
corner_radius_top_left = 5
corner_radius_top_right = 5
corner_radius_bottom_right = 5
corner_radius_bottom_left = 5

[sub_resource type="Shader" id=11]
code = "shader_type canvas_item;

uniform float max_value = 100;
uniform float value = 50;

uniform vec4 start_color: hint_color;
uniform vec4 end_color: hint_color;

void fragment() {
	float fraction = 1.0 - value/max_value;
	COLOR = float(UV.y > fraction) * mix(start_color, end_color, UV.y);
}"

[sub_resource type="ShaderMaterial" id=12]
shader = SubResource( 11 )
shader_param/max_value = 100.0
shader_param/value = 100.0
shader_param/start_color = Color( 0.898039, 0.694118, 0.0901961, 1 )
shader_param/end_color = Color( 0.898039, 0.266667, 0.0745098, 1 )

[sub_resource type="Theme" id=9]

[sub_resource type="ShaderMaterial" id=8]
shader = ExtResource( 12 )
shader_param/fill_color = Color( 0.843137, 0.733333, 0.133333, 1 )
shader_param/empty_color = Color( 0.831373, 0.713726, 0.713726, 1 )
shader_param/enabled = true
shader_param/texture_resource = ExtResource( 11 )

[sub_resource type="Shader" id=6]
code = "shader_type canvas_item;
render_mode blend_mix;

uniform sampler2D texture_resource;

void fragment(){
	COLOR = texture(texture_resource, UV);
}"

[sub_resource type="ShaderMaterial" id=4]
shader = SubResource( 6 )
shader_param/texture_resource = ExtResource( 8 )

[sub_resource type="Shader" id=3]
code = "shader_type canvas_item;
render_mode blend_mix;

uniform sampler2D texture_resource;

void fragment(){
	COLOR = texture(texture_resource, UV);
}"

[sub_resource type="ShaderMaterial" id=2]
shader = SubResource( 3 )
shader_param/texture_resource = ExtResource( 6 )

[sub_resource type="ShaderMaterial" id=16]
shader = SubResource( 3 )
shader_param/texture_resource = ExtResource( 4 )

[sub_resource type="Animation" id=15]
length = 0.001
tracks/0/type = "bezier"
tracks/0/path = NodePath("Game/Vignette:material:shader_param/vignette_intensity")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"points": PoolRealArray( 0.5, -0.25, 0, 0.25, 0 ),
"times": PoolRealArray( 0 )
}
tracks/1/type = "bezier"
tracks/1/path = NodePath("Game/Vignette:material:shader_param/vignette_rgb:r")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/keys = {
"points": PoolRealArray( 0.105882, -0.25, 0, 0.25, 0 ),
"times": PoolRealArray( 0 )
}
tracks/2/type = "bezier"
tracks/2/path = NodePath("Game/Vignette:material:shader_param/vignette_rgb:g")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/keys = {
"points": PoolRealArray( 0.784314, -0.25, 0, 0.25, 0 ),
"times": PoolRealArray( 0 )
}
tracks/3/type = "bezier"
tracks/3/path = NodePath("Game/Vignette:material:shader_param/vignette_rgb:b")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/keys = {
"points": PoolRealArray( 0.964706, -0.25, 0, 0.25, 0 ),
"times": PoolRealArray( 0 )
}
tracks/4/type = "bezier"
tracks/4/path = NodePath("Game/Vignette:material:shader_param/vignette_rgb:a")
tracks/4/interp = 1
tracks/4/loop_wrap = true
tracks/4/imported = false
tracks/4/enabled = true
tracks/4/keys = {
"points": PoolRealArray( 1, -0.25, 0, 0.25, 0 ),
"times": PoolRealArray( 0 )
}
tracks/5/type = "value"
tracks/5/path = NodePath("Game/Vignette:material:shader_param/vignette_rgb")
tracks/5/interp = 1
tracks/5/loop_wrap = true
tracks/5/imported = false
tracks/5/enabled = true
tracks/5/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 0,
"values": [ Color( 0.105882, 0.784314, 0.964706, 1 ) ]
}

[sub_resource type="Animation" id=14]
resource_name = "get_hit"
length = 0.8
step = 0.05
tracks/0/type = "bezier"
tracks/0/path = NodePath("Game/Vignette:material:shader_param/vignette_intensity")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"points": PoolRealArray( 0.5, -0.25, 0, 0.25, 0, 1.5, -0.25, 0, 0.25, 0, 1.5, -0.25, 0, 0.25, 0, 0.5, -0.25, 0, 0.25, 0 ),
"times": PoolRealArray( 0, 0.15, 0.55, 0.8 )
}
tracks/1/type = "value"
tracks/1/path = NodePath("Game/Vignette:material:shader_param/vignette_rgb")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/keys = {
"times": PoolRealArray( 0, 0.15, 0.25, 0.35, 0.45, 0.55, 0.8 ),
"transitions": PoolRealArray( 1, 1, 1, 1, 1, 1, 1 ),
"update": 0,
"values": [ Color( 0.105882, 0.784314, 0.964706, 1 ), Color( 0.917647, 0.964706, 0.105882, 1 ), Color( 0.105882, 0.784314, 0.964706, 1 ), Color( 0.917647, 0.964706, 0.105882, 1 ), Color( 0.105882, 0.784314, 0.964706, 1 ), Color( 0.917647, 0.964706, 0.105882, 1 ), Color( 0.105882, 0.784314, 0.964706, 1 ) ]
}

[node name="UI" type="Control"]
anchor_right = 1.0
anchor_bottom = 1.0
rect_pivot_offset = Vector2( -359, -172 )
mouse_filter = 2
script = ExtResource( 1 )

[node name="DevContainer" type="HBoxContainer" parent="."]
visible = false
anchor_right = 1.0
anchor_bottom = 1.0
mouse_filter = 2
alignment = 2

[node name="DeveloperInfo" type="VBoxContainer" parent="DevContainer"]
margin_left = 824.0
margin_right = 1024.0
margin_bottom = 245.0
size_flags_vertical = 0

[node name="FPSCounter" type="Label" parent="DevContainer/DeveloperInfo"]
margin_right = 200.0
margin_bottom = 21.0
text = "FPS"
align = 2

[node name="HostOrClient" type="Label" parent="DevContainer/DeveloperInfo"]
margin_top = 25.0
margin_right = 200.0
margin_bottom = 46.0
text = "HostOrClients"
align = 2

[node name="DebugLog" type="TextEdit" parent="DevContainer/DeveloperInfo"]
margin_top = 50.0
margin_right = 200.0
margin_bottom = 200.0
rect_min_size = Vector2( 200, 150 )
size_flags_horizontal = 3
size_flags_vertical = 3
readonly = true
wrap_enabled = true

[node name="RopeLengthCon" type="HBoxContainer" parent="DevContainer/DeveloperInfo"]
margin_top = 204.0
margin_right = 200.0
margin_bottom = 225.0
alignment = 2

[node name="Label" type="Label" parent="DevContainer/DeveloperInfo/RopeLengthCon"]
margin_left = 88.0
margin_right = 196.0
margin_bottom = 21.0
text = "Rope length:"

[node name="RopeLength" type="Label" parent="DevContainer/DeveloperInfo/RopeLengthCon"]
unique_name_in_owner = true
margin_left = 200.0
margin_right = 200.0
margin_bottom = 21.0

[node name="HideLabel" type="Label" parent="DevContainer/DeveloperInfo"]
margin_top = 229.0
margin_right = 200.0
margin_bottom = 245.0
custom_fonts/font = ExtResource( 7 )
text = "(F1 to hide)"
align = 1

[node name="PausePanel" type="Panel" parent="."]
visible = false
anchor_right = 1.0
anchor_bottom = 1.0

[node name="InnerPanel" type="Panel" parent="PausePanel"]
anchor_left = 0.2
anchor_top = 0.2
anchor_right = 0.8
anchor_bottom = 0.8

[node name="VBoxContainer" type="VBoxContainer" parent="PausePanel/InnerPanel"]
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 0
grow_vertical = 2
size_flags_horizontal = 3
size_flags_vertical = 3

[node name="Label" type="Label" parent="PausePanel/InnerPanel/VBoxContainer"]
margin_right = 614.0
margin_bottom = 61.0
custom_fonts/font = ExtResource( 2 )
text = "PAUSED"
align = 1

[node name="HBoxContainer" type="HBoxContainer" parent="PausePanel/InnerPanel/VBoxContainer"]
margin_top = 65.0
margin_right = 614.0
margin_bottom = 111.0
alignment = 1

[node name="CenterContainer" type="CenterContainer" parent="PausePanel/InnerPanel/VBoxContainer/HBoxContainer"]
margin_right = 113.0
margin_bottom = 46.0
size_flags_horizontal = 3
size_flags_stretch_ratio = 0.3

[node name="GridContainer" type="GridContainer" parent="PausePanel/InnerPanel/VBoxContainer/HBoxContainer"]
margin_left = 117.0
margin_right = 496.0
margin_bottom = 46.0
size_flags_horizontal = 3
columns = 2

[node name="MusicVolumeLabel" type="Label" parent="PausePanel/InnerPanel/VBoxContainer/HBoxContainer/GridContainer"]
margin_right = 180.0
margin_bottom = 21.0
text = "Music Volume:"
align = 2

[node name="MusicSlider" type="HSlider" parent="PausePanel/InnerPanel/VBoxContainer/HBoxContainer/GridContainer"]
margin_left = 184.0
margin_right = 379.0
margin_bottom = 16.0
size_flags_horizontal = 3
size_flags_vertical = 2

[node name="MusicVolumeLabel2" type="Label" parent="PausePanel/InnerPanel/VBoxContainer/HBoxContainer/GridContainer"]
margin_top = 25.0
margin_right = 180.0
margin_bottom = 46.0
text = "Sound Effect Volume:"

[node name="SoundSlider" type="HSlider" parent="PausePanel/InnerPanel/VBoxContainer/HBoxContainer/GridContainer"]
margin_left = 184.0
margin_top = 25.0
margin_right = 379.0
margin_bottom = 41.0

[node name="CenterContainer2" type="CenterContainer" parent="PausePanel/InnerPanel/VBoxContainer/HBoxContainer"]
margin_left = 500.0
margin_right = 614.0
margin_bottom = 46.0
size_flags_horizontal = 3
size_flags_stretch_ratio = 0.3

[node name="Message" type="Label" parent="."]
margin_right = 40.0
margin_bottom = 21.0

[node name="Game" type="Control" parent="."]
anchor_right = 1.0
anchor_bottom = 1.0
mouse_filter = 2

[node name="Vignette" type="ColorRect" parent="Game"]
unique_name_in_owner = true
material = SubResource( 13 )
anchor_right = 1.0
anchor_bottom = 1.0
color = Color( 1, 1, 1, 0 )

[node name="CanvasLayer" type="CanvasLayer" parent="Game"]
visible = false

[node name="LeftSide" type="HBoxContainer" parent="Game/CanvasLayer"]
anchor_left = 0.011
anchor_top = 0.1
anchor_right = 0.02
anchor_bottom = 0.9
margin_right = 40.784
size_flags_vertical = 3

[node name="PowerAndCrystals" type="VBoxContainer" parent="Game/CanvasLayer/LeftSide"]
margin_right = 50.0
margin_bottom = 480.0

[node name="EnergyCrystalsBox" type="VBoxContainer" parent="Game/CanvasLayer/LeftSide/PowerAndCrystals"]
unique_name_in_owner = true
margin_right = 50.0
margin_bottom = 194.0
alignment = 1

[node name="AspectRatioContainer3" type="AspectRatioContainer" parent="Game/CanvasLayer/LeftSide/PowerAndCrystals/EnergyCrystalsBox"]
margin_right = 50.0
margin_bottom = 62.0

[node name="ColorRect" type="ColorRect" parent="Game/CanvasLayer/LeftSide/PowerAndCrystals/EnergyCrystalsBox/AspectRatioContainer3"]
material = SubResource( 5 )
margin_right = 50.0
margin_bottom = 62.0
rect_min_size = Vector2( 48, 62 )

[node name="AspectRatioContainer2" type="AspectRatioContainer" parent="Game/CanvasLayer/LeftSide/PowerAndCrystals/EnergyCrystalsBox"]
margin_top = 66.0
margin_right = 50.0
margin_bottom = 128.0

[node name="ColorRect" type="ColorRect" parent="Game/CanvasLayer/LeftSide/PowerAndCrystals/EnergyCrystalsBox/AspectRatioContainer2"]
material = SubResource( 5 )
margin_right = 50.0
margin_bottom = 62.0
rect_min_size = Vector2( 48, 62 )

[node name="AspectRatioContainer1" type="AspectRatioContainer" parent="Game/CanvasLayer/LeftSide/PowerAndCrystals/EnergyCrystalsBox"]
margin_top = 132.0
margin_right = 50.0
margin_bottom = 194.0

[node name="ColorRect" type="ColorRect" parent="Game/CanvasLayer/LeftSide/PowerAndCrystals/EnergyCrystalsBox/AspectRatioContainer1"]
material = SubResource( 5 )
margin_right = 50.0
margin_bottom = 62.0
rect_min_size = Vector2( 48, 62 )

[node name="Gap" type="Control" parent="Game/CanvasLayer/LeftSide/PowerAndCrystals"]
margin_top = 198.0
margin_right = 50.0
margin_bottom = 216.0
size_flags_horizontal = 3
size_flags_vertical = 3
size_flags_stretch_ratio = 0.09

[node name="Panel" type="Panel" parent="Game/CanvasLayer/LeftSide/PowerAndCrystals"]
margin_top = 220.0
margin_right = 50.0
margin_bottom = 430.0
size_flags_horizontal = 3
size_flags_vertical = 3
custom_styles/panel = SubResource( 10 )

[node name="PowerProgress" type="ColorRect" parent="Game/CanvasLayer/LeftSide/PowerAndCrystals/Panel"]
unique_name_in_owner = true
material = SubResource( 12 )
anchor_right = 1.0
anchor_bottom = 1.0
margin_left = 5.0
margin_top = 5.0
margin_right = -5.0
margin_bottom = -5.0
size_flags_horizontal = 3
size_flags_vertical = 3
theme = SubResource( 9 )

[node name="AspectRatioContainer" type="AspectRatioContainer" parent="Game/CanvasLayer/LeftSide/PowerAndCrystals"]
margin_top = 434.0
margin_right = 50.0
margin_bottom = 479.0

[node name="PowerIcon" type="ColorRect" parent="Game/CanvasLayer/LeftSide/PowerAndCrystals/AspectRatioContainer"]
material = SubResource( 8 )
margin_right = 50.0
margin_bottom = 45.0
rect_min_size = Vector2( 50, 45 )

[node name="RightSide" type="HBoxContainer" parent="Game/CanvasLayer"]
anchor_right = 1.0
anchor_bottom = 1.0
mouse_filter = 2
alignment = 2

[node name="TreasureUI" type="HBoxContainer" parent="Game/CanvasLayer/RightSide"]
unique_name_in_owner = true
modulate = Color( 1, 1, 1, 0 )
margin_left = 804.0
margin_right = 1024.0
margin_bottom = 51.0
size_flags_vertical = 0

[node name="GearIcon" type="ColorRect" parent="Game/CanvasLayer/RightSide/TreasureUI"]
modulate = Color( 0.172549, 0.133333, 0.133333, 1 )
material = SubResource( 4 )
margin_right = 48.0
margin_bottom = 51.0
rect_min_size = Vector2( 48, 48 )

[node name="GearAmount" type="Label" parent="Game/CanvasLayer/RightSide/TreasureUI"]
unique_name_in_owner = true
margin_left = 52.0
margin_right = 98.0
margin_bottom = 51.0
custom_fonts/font = ExtResource( 9 )
text = "00"

[node name="Gap" type="Control" parent="Game/CanvasLayer/RightSide/TreasureUI"]
unique_name_in_owner = true
margin_left = 102.0
margin_right = 118.0
margin_bottom = 51.0
rect_min_size = Vector2( 16, 0 )

[node name="GoldIcon" type="ColorRect" parent="Game/CanvasLayer/RightSide/TreasureUI"]
modulate = Color( 0.729412, 0.635294, 0.196078, 1 )
material = SubResource( 2 )
margin_left = 122.0
margin_right = 170.0
margin_bottom = 51.0
rect_min_size = Vector2( 48, 48 )

[node name="GoldAmount" type="Label" parent="Game/CanvasLayer/RightSide/TreasureUI"]
unique_name_in_owner = true
margin_left = 174.0
margin_right = 220.0
margin_bottom = 51.0
custom_fonts/font = ExtResource( 9 )
text = "00"

[node name="Gap2" type="Control" parent="Game/CanvasLayer/RightSide/TreasureUI"]
unique_name_in_owner = true
margin_left = 102.0
margin_right = 118.0
margin_bottom = 51.0
rect_min_size = Vector2( 16, 0 )

[node name="DiamondIcon" type="ColorRect" parent="Game/CanvasLayer/RightSide/TreasureUI"]
unique_name_in_owner = true
visible = false
modulate = Color( 0.176471, 0.854902, 0.854902, 1 )
material = SubResource( 16 )
margin_left = 224.0
margin_right = 272.0
margin_bottom = 51.0
rect_min_size = Vector2( 48, 48 )

[node name="DiamondAmount" type="Label" parent="Game/CanvasLayer/RightSide/TreasureUI"]
unique_name_in_owner = true
visible = false
margin_left = 224.0
margin_right = 270.0
margin_bottom = 51.0
custom_fonts/font = ExtResource( 9 )
text = "00"

[node name="FadeRect" type="ColorRect" parent="."]
anchor_right = 1.0
anchor_bottom = 1.0
mouse_filter = 2
color = Color( 0, 0, 0, 0 )

[node name="VignetteHitPlayer" type="AnimationPlayer" parent="."]
anims/RESET = SubResource( 15 )
anims/get_hit = SubResource( 14 )
